(()=>{"use strict";var e=function(e,t){e.classList.add(t),e.setAttribute("disabled",!0)},t=function(t,r,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(t)?function(e,t){e.classList.remove(t),e.removeAttribute("disabled")}(r,n):e(r,n)},r=function(e){if("Escape"===e.key){var t=document.querySelector(".popup_opened");o(t)}},n=function(e){e.classList.add("popup_opened"),document.addEventListener("keydown",r)},o=function(e){document.removeEventListener("keydown",r),e.style.animationName="close-popup",e.style.animationPlayState="running",setTimeout((function(){e.classList.remove("popup_opened"),e.style.animationName="",e.style.animationPlayState=""}),300)},c=document.querySelectorAll(".popup"),u=document.querySelector(".popup_type_profile"),i=document.querySelector(".popup_type_card-form"),a=document.querySelector(".popup_type_image"),l=document.querySelector(".form_type_card-form"),s=document.querySelector(".form_type_profile"),d=document.querySelector("#profile-name-input"),p=document.querySelector("#profile-profession-input"),m=document.querySelector(".profile__name"),f=document.querySelector(".profile__profession"),_=a.querySelector(".popup__img"),y=a.querySelector(".popup__webp"),v=a.querySelector(".popup__caption"),S=[];S=function(){var e=[],t={link:"",name:""};return fetch("https://nomoreparties.co/v1/plus-cohort-15/cards",{headers:{authorization:"f31bf66b-98c5-4066-9b1a-67f29063c0e2"}}).then((function(e){return e.json()})).then((function(r){for(var n=0;n<r.length;n+=1)t.name=r[n].name,t.link=r[n].link,e.push(t.name),t={link:"",name:""}})).catch((function(e){console.log(e)})),e}(),console.log(S),S.forEach((function(e){console.log(e.link)}));var q,g,b,k,L,E,h,C=document.querySelector("#card-name-input"),x=document.querySelector("#card-link-input"),A=document.querySelector(".cards-block"),T=document.querySelector("#card-template"),P={link:"",name:""},w=function(e,t){var r=T.content.querySelector(".cards-block__card").cloneNode(!0);return r.querySelector(".card__text").textContent=e.name,r.querySelector(".card__img").src=e.link,r.querySelector(".card__img").onerror=function(){r.querySelector(".card__img").src=t},r.querySelector(".card__picture").addEventListener("click",(function(e){return function(e){_.src=e.currentTarget.querySelector(".card__img").getAttribute("src"),_.alt=e.currentTarget.querySelector(".card__img").getAttribute("alt"),y.srcset=e.currentTarget.querySelector(".card__webp").getAttribute("srcset"),v.textContent=e.currentTarget.closest(".card").querySelector(".card__text").textContent,e.stopPropagation(),n(a)}(e)})),r.querySelector(".card__like-button").addEventListener("click",(function(e){return function(e){e.currentTarget.classList.toggle("card__like-button_activ"),e.stopPropagation()}(e)})),r.querySelector(".card__trash-button").addEventListener("click",(function(e){return function(e){e.currentTarget.closest(".card").remove(),e.stopPropagation()}(e)})),r},B=i.querySelector(".form__submit"),D=i.querySelector("#card-name-input").value,M=i.querySelector("#card-link-input").value,N=document.querySelector(".profile__edit-button"),V=document.querySelector(".profile__add-button");N.addEventListener("click",(function(e){return d.value=m.textContent,p.value=f.textContent,void n(u)})),V.addEventListener("click",(function(){n(i),D||M||e(B,"form__submit_inactive")})),c.forEach((function(e){e.addEventListener("click",(function(e){!function(e){(e.target.classList.contains("popup__close-button")||e.target.classList.contains("popup_opened"))&&(o(e.currentTarget.closest(".popup")),e.stopPropagation())}(e)}))})),l.addEventListener("submit",(function(e){P.name=C.value,P.link=x.value,A.prepend(w(P,splashScreen)),C.value="",x.value="",o(i),e.preventDefault()})),s.addEventListener("submit",(function(e){m.textContent=d.value,f.textContent=p.value,o(u),e.preventDefault()})),S.forEach((function(e){P.name=e.name,P.link=e.src,A.prepend(w(P,splashScreen))})),g=(q={formSelector:".form",inputSelector:".form__input-text",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_inactive",inputErrorClass:"form__input-text_type_error",errorClass:"form__input-error"}).formSelector,b=q.inputSelector,k=q.submitButtonSelector,L=q.inactiveButtonClass,E=q.inputErrorClass,h=q.errorClass,Array.from(document.querySelectorAll(g)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e,r,n,o,c,u){var i=Array.from(e.querySelectorAll(r)),a=e.querySelectorAll(n);a.forEach((function(e){t(i,e,o)})),i.forEach((function(r){r.addEventListener("input",(function(){(function(e,t,r,n){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t,r,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(r),o.classList.remove(n+"_active"),o.textContent=""}(e,t,r,n):function(e,t,r,n,o){var c=e.querySelector(".".concat(t.id,"-error"));t.classList.add(n),c.textContent=r,c.classList.add(o+"_active")}(e,t,t.validationMessage,r,n)})(e,r,c,u),a.forEach((function(e){t(i,e,o)}))}))}))}(e,b,k,L,E,h)}))})();